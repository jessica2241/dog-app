{"version":3,"sources":["Api.js","VkApi.js","panels/Home.js","App.js","serviceWorker.js","index.js"],"names":["Api","id","this","vkApi","VKMiniAppAPI","initApp","idApp","VkApi","token","method","params","urlFriends","axios","jsonp","friends","url","formData","FormData","get","then","response","console","log","append","data","catch","request","ownerId","docId","accessKey","captcha_sid","undefined","captcha_key","Home","User","useState","popout","setPopout","count","maxCount","modal","setModal","bonus","setBonus","api","http","XMLHttpRequest","Array","prototype","remove","what","ax","a","arguments","L","length","indexOf","splice","activeModal","onClose","header","right","weight","style","marginBottom","size","target","href","mode","aria-setsize","activePanel","src","alt","onClick","event","disabled","className","ClickStory","getAccessToken","vk","accessToken","uurl","toString","open","send","onreadystatechange","readyState","status","JSON","parse","responseText","actions","title","autoclose","err","level","value","useEffect","require","App","setUser","bridge","subscribe","detail","type","schemeAttribute","document","createAttribute","scheme","body","attributes","setNamedItem","getUserInfo","userInfo","Boolean","window","location","hostname","match","ReactDOM","render","StrictMode","getElementById","navigator","serviceWorker","ready","registration","unregister","error","message"],"mappings":"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","file":"static/js/main.d73521e9.chunk.js","sourcesContent":["import {VKMiniAppAPI} from \"@vkontakte/vk-mini-apps-api\";\r\n\r\nclass Api {\r\n    vkApi: VKMiniAppAPI;\r\n    idApp: number;\r\n\r\n\r\n    constructor(id: number) {\r\n        this.vkApi = new VKMiniAppAPI()\r\n\r\n        this.vkApi.initApp()\r\n        this.idApp = id\r\n    }\r\n}\r\n\r\nexport default Api;\r\n\r\n","import axios from \"axios-jsonp-pro\";\r\n\r\nclass VkApi {\r\n    arr: Map;\r\n\r\n    constructor(token: string) {\r\n        this.token = token\r\n    }\r\n\r\n\r\n    async request(method: string, params = '') {\r\n        //\r\n        // var str: string = ''\r\n        //  for (let [key, value] of params.entries()) {\r\n        //         str += '&'+key+'='+value\r\n        //  }https://api.vk.com/method/docs.getUploadServer?type=graffiti&group_id=194461517&v=5.103&access_token=pp\r\n\r\n        let urlFriends = 'https://api.vk.com/method/' + method + '?' +\r\n            '&access_token=' + this.token +\r\n            '&' + params +\r\n            '&v=5.103';\r\n\r\n        let friends = await axios.jsonp(urlFriends)\r\n\r\n        return friends\r\n    }\r\n\r\n    doAjaxPost(url: string) {\r\n        var formData = new FormData();\r\n\r\n\r\n        axios.get('https://psv4.userapi.com/c848128/u589567154/docs/d9/ca213b5b6712/58.png')\r\n            .then(function (response) {\r\n                // handle success\r\n                console.log(response);\r\n\r\n        formData.append(\"file\", response.data);\r\n\r\n        axios({\r\n\r\n            method: 'POST',\r\n            url: url,\r\n            data: formData,\r\n        })\r\n            .then(function (response) {\r\n                console.log(response);\r\n            })\r\n            .catch(function (response) {\r\n                console.log(response);\r\n            });\r\n    })\r\n}\r\n\r\n    getUploadUrl() {\r\n        return this.request('docs.getUploadServer', 'type=graffiti&group_id=194461517')\r\n\r\n    }\r\n\r\n\r\n\r\n    docs_add(ownerId, docId, accessKey, captcha_sid = undefined, captcha_key = undefined) {\r\n\r\n        if (captcha_sid === undefined) {\r\n            return this.request('docs.add',\r\n                'owner_id=' + ownerId +\r\n                '&doc_id=' + docId +\r\n                '&access_key=' + accessKey\r\n            )\r\n        } else {\r\n            return this.request('docs.add',\r\n                'owner_id=' + ownerId +\r\n                '&doc_id=' + docId +\r\n                '&access_key=' + accessKey+\r\n                '&captcha_key=' + captcha_key+\r\n                '&captcha_sid=' + captcha_sid\r\n            )\r\n        }\r\n    }\r\n}\r\n\r\nexport default VkApi;","import React, {useState} from \"react\";\r\nimport {\r\n    Alert,\r\n    Button,\r\n    Caption,\r\n    Cell,\r\n    Div,\r\n    Group,\r\n    InfoRow,\r\n    ModalCard,\r\n    ModalRoot,\r\n    Panel,\r\n    Progress, Text,\r\n    View,\r\n    Header,\r\n    Gallery,\r\n    PanelHeader, ModalPageHeader, PanelHeaderButton, ModalPage, CellButton\r\n} from \"@vkontakte/vkui\";\r\nimport Api from \"../Api\";\r\nimport VkApi from '../VkApi'\r\nimport FormLayoutGroup from \"@vkontakte/vkui/dist/components/FormLayoutGroup/FormLayoutGroup\";\r\nimport Input from \"@vkontakte/vkui/dist/components/Input/Input\";\r\nimport List from \"@vkontakte/vkui/dist/components/List/List\";\r\nimport Icon24Add from '@vkontakte/icons/dist/24/add';\r\nimport Icon24Cancel from '@vkontakte/icons/dist/24/cancel'\r\nimport Icon56LockOutline from '@vkontakte/icons/dist/56/lock_outline';\r\nimport Icon28MessagesOutline from '@vkontakte/icons/dist/28/messages_outline';\r\nimport ScreenSpinner from \"@vkontakte/vkui/dist/components/ScreenSpinner/ScreenSpinner\";\r\n\r\nconst Home = (User) => {\r\n\r\n\r\n\r\n    const [popout, setPopout] = useState(null);\r\n    const [status, setStatus] = useState(false);\r\n    let [count, setCount] = useState(1247);\r\n    let [maxCount, setMaxCount] = useState(10000);\r\n    let [modal, setModal] = useState(null);\r\n\r\n    let [bonus, setBonus] = useState(false);\r\n\r\n\r\n\r\n    const idGroup: number = 0\r\n    const idApp: number = 7509109\r\n    let api: Api = new Api(idApp)\r\n    const http = new XMLHttpRequest()\r\n\r\n\r\n\r\n\r\n\r\n\r\n\r\n    const ClickInfo = (event: React.MouseEvent) => {\r\n        setModal(\"info\")\r\n    }\r\n\r\n    // eslint-disable-next-line no-extend-native\r\n    Array.prototype.remove = function() {\r\n        var what, a = arguments, L = a.length, ax;\r\n        while (L && this.length) {\r\n            what = a[--L];\r\n            while ((ax = this.indexOf(what)) !== -1) {\r\n                this.splice(ax, 1);\r\n            }\r\n        }\r\n        return this;\r\n    };\r\n\r\n\r\n\r\n\r\n    async function t() {\r\n        await sleep(200)\r\n    }\r\n    function sleep (time) {\r\n        return new Promise((resolve) => setTimeout(resolve, time));\r\n    }\r\n\r\n\r\n    // eslint-disable-next-line no-unused-vars\r\n    function pause() {\r\n        return new Promise(resolve => setTimeout(() => {\r\n            console.log(``);\r\n            resolve();\r\n        }, 1500));\r\n    }\r\n\r\n\r\n    function ClickStory() {\r\n\r\n        api.vkApi.getAccessToken(api.idApp, 'stories').then(\r\n            data => {\r\n                console.log(data)\r\n                const vk = new VkApi(data.accessToken);\r\n                setPopout(<ScreenSpinner size='large'/>)                //TODO: LINK\r\n                vk.request(\"stories.getPhotoUploadServer\", \"add_to_news=1&link_url=https://vk.com/app7509109\").then(\r\n                    data => {\r\n                        let uurl = data['response']['upload_url']\r\n                        let url = 'https://help-please.mooo.com:81/dog?id=' + User.User.id.toString()+'&url='+uurl\r\n                        http.open(\"GET\", url)\r\n                        http.send()\r\n                        http.onreadystatechange = function () {\r\n                            if (this.readyState === 4 && this.status === 200) {\r\n                                const data = JSON.parse(this.responseText);\r\n                                console.log(data)\r\n                                setPopout(null)\r\n                                setBonus(true)\r\n                                if (data === true) {\r\n                                    setPopout(\r\n                                        <Alert\r\n                                            onClose={function () {\r\n                                                setPopout(null)\r\n                                            }}\r\n                                        >\r\n                                            <h2>Круто!</h2>\r\n                                            <p> Вы успешно опубликовали историю! Спасибо!</p>\r\n                                        </Alert>)\r\n                                } else {\r\n                                    console.log(data);\r\n                                    setPopout(\r\n                                        <Alert\r\n                                            actions={[{\r\n                                                title: 'Отмена',\r\n                                                autoclose: true,\r\n                                                mode: 'cancel'\r\n                                            }, {\r\n                                                title: 'Повторить',\r\n                                                autoclose: true,\r\n                                            }]}\r\n                                            onClose={function () {\r\n                                                setPopout(null)\r\n                                            }}\r\n                                        >\r\n                                            <h2>Ошибка запроса #003</h2>\r\n                                            <p> {data} </p>\r\n                                        </Alert>)\r\n                                }\r\n                            } else {\r\n                                setPopout(\r\n                                    <Alert\r\n                                        actions={[{\r\n                                            title: 'Отмена',\r\n                                            autoclose: true,\r\n                                            mode: 'cancel'\r\n                                        }, {\r\n                                            title: 'Повторить',\r\n                                            autoclose: true,\r\n                                        }]}\r\n                                        onClose={function () {\r\n                                            setPopout(null)\r\n                                        }}\r\n                                    >\r\n                                        <h2>Ошибка #2023</h2>\r\n                                        <p>Временно недоступно. Попробуйте позже.</p>\r\n                                    </Alert>)\r\n                            }\r\n                        }\r\n                    },\r\n                    err => {\r\n                        console.log(err)\r\n                        setPopout(\r\n                            <Alert\r\n                                actions={[{\r\n                                    title: 'Отмена',\r\n                                    autoclose: true,\r\n                                    mode: 'cancel'\r\n                                }, {\r\n                                    title: 'Повторить',\r\n                                    autoclose: true,\r\n                                }]}\r\n                                onClose={function () {\r\n                                    setPopout(null)\r\n                                    ClickStory()\r\n                                }}\r\n                            >\r\n                                <h2>Ошибка #113</h2>\r\n                                <p>Временно недоступно. Попробуйте позже.</p>\r\n                            </Alert>)\r\n                    }\r\n                )\r\n            })\r\n    }\r\n\r\n\r\n\r\n    return (\r\n                <View modal={\r\n                    <ModalRoot\r\n                    activeModal={modal}\r\n                    onClose={() => setModal(null)}>\r\n\r\n                        <ModalPage\r\n                            id=\"info\"\r\n                            header={\r\n                                <ModalPageHeader\r\n\r\n                                    right={<PanelHeaderButton > <Icon24Cancel/> </PanelHeaderButton>}\r\n                                >\r\n                                    Подробная информация\r\n                                </ModalPageHeader>\r\n                            }\r\n                        >\r\n                            <Text weight=\"regular\" style={{ marginBottom: 16 }}>\r\n                                🆘🆘УМОЛЯЕМ ПОМOГИТЕ! НУЖНО CПАСТИ CБИТУЮ AВТОМOБИЛЕМ СОБAКУ 🆘🆘🆘\r\n\r\n                                Сегoдня около 10:00 на тeрритории предприятия обнаружила трaвмировaнную собаку всю в крови ! Бeдное животное от страха забилось под припaркованную газель и скулилo от боли и ужаса происходящего! Рядом оживленнaя трасса и что скорeе всего - собачку сбила машина и как обычно никто конечно же нe остaновился помочь! Ну а что, это же всего лишь собака не так ли ?! Нeгодовaнию и гневу уже просто нет предела! Ну как ? Кaк можно навредить бaззащитному животному и бросить умирать? Нeвозможно дaже представить в каком шоке и ужасе было это создaние !\r\n\r\n                                Собaка лежала на холодной зeмле, истекая кровью и моля о помощи! Экстрeнно с друзьями достaвили собаку в клинику. По результатам – oткрытый перелом задней конeчности, множественные травмы! Сейчас собака в стационаре, врачи стaбилизируют ее состояние, впереди операция!!\r\n\r\n                                C каждым днем убeждаешься все бoльше, что человеческой жестокости нет предела ! Когдa же уже бедные беззащитное животные смогут жить спoкойно в любви и зaботе? Когда же уже их перестанут выгонять, избивать, убивaть?\r\n\r\n                                Только за первый этaп лечения было оплачено 4891р. Я понимаю, чтобы спасти жизнь собaчки нужен длительный период, который пoвлечёт за собой дополнитeльные материальные издержки, и очень надеюсь на вашу помощь.\r\n                            </Text>\r\n                            <Button size=\"xl\"  target=\"_blank\" href=\"https://vk.com/app6471849_-196346063\" mode=\"commerce\" >Помочь финансово</Button>\r\n                        <Text weight=\"semibold\" style={{ marginBottom: 20}} aria-setsize=\"3\" >Прошу Вас, не проходите мимо! :(</Text>\r\n                        </ModalPage>\r\n\r\n                </ModalRoot>} popout={popout} activePanel=\"div\">\r\n                    <Panel id=\"div\">\r\n\r\n                        <Div>\r\n                            <PanelHeader>Cпacти жизнь нecчаcтнoй coбaчки</PanelHeader>\r\n                            <Group>\r\n\r\n                                    <div> <img src=\"images/w.png\"\r\n                                               alt=\"Загрузка изображения....\"/></div>\r\n\r\n\r\n\r\n                                <Text weight=\"regular\" style={{ marginBottom: 16 }}> 🆘🆘УМОЛЯЕМ ПОМOГИТЕ! НУЖНО CПАСТИ CБИТУЮ AВТОМOБИЛЕМ СОБAКУ 🆘🆘🆘\r\n                                    Дpузья! Пожалуйста, не будьте черствыми по отношению к братьям нашим мeньшим! Давайте все вместе пoможем этой бедолаге стать здоровой и счастливoй!!</Text>\r\n\r\n                                    <Button size=\"xl\" onClick={ClickInfo} mode=\"secondary\" >Подробнее</Button>\r\n                                    <Button size=\"xl\"  target=\"_blank\" href=\"https://vk.com/app6471849_-196346063\" mode=\"commerce\" >Помочь финансово</Button>\r\n                                <Button size=\"xl\" disabled={bonus} className={\"bonus\"} onClick={ClickStory} mode=\"primary\" >Поделиться в истории</Button>\r\n\r\n\r\n                                <div className=\"progress\">\r\n                                <Caption  level=\"1\" weight=\"bold\" style={{marginBottom: 16}}> </Caption>\r\n                                <InfoRow header={\"Собрано \" + count + \"руб.  из \"+maxCount.toString()+\" руб!\"}>\r\n                                    <Progress value={count/80}/>\r\n                                </InfoRow></div>\r\n\r\n                                {/*<Button size=\"xl\" onClick={ClickInfo} mode=\"secondary\" >Подробнее</Button>*/}\r\n                                {/*<Button size=\"xl\"  target=\"_blank\" href=\"https://vk.com/app6471849_-196346063\" mode=\"commerce\" >Помочь финансово</Button>*/}\r\n                                {/*<Button size=\"xl\" disabled={bonus} className={\"bonus\"} onClick={ClickStory} mode=\"primary\" >Поделиться в истории</Button>*/}\r\n\r\n\r\n                            </Group>\r\n                        </Div>\r\n                    </Panel>\r\n                </View>\r\n\r\n            )\r\n        }\r\n\r\n        export default Home\r\n\r\n","import React, {} from \"react\";\nimport '@vkontakte/vkui/dist/vkui.css';\nimport bridge from '@vkontakte/vk-bridge'\nimport ScreenSpinner from \"@vkontakte/vkui/dist/components/ScreenSpinner/ScreenSpinner\";\nimport Home from \"./panels/Home\";\nimport Api from \"./Api\";\nimport VkApi from \"./VkApi\";\nimport {Alert} from \"@vkontakte/vkui\";\nconst {useEffect} = require(\"react\");\nconst {useState} = require(\"react\");\n\nconst App = () => {\n    // eslint-disable-next-line\n    const [User, setUser] = useState(null);\n    const idApp: number = 7509109\n// eslint-disable-next-line\n    const [popout, setPopout] = useState(<ScreenSpinner size='large'/>);\n\n\n    useEffect(() => {\n        bridge.subscribe(({detail: {type, data}}) => {\n            if (type === 'VKWebAppUpdateConfig') {\n                const schemeAttribute = document.createAttribute('scheme');\n                schemeAttribute.value = data.scheme ? data.scheme : 'client_light';\n                document.body.attributes.setNamedItem(schemeAttribute);\n            }\n        })\n        let api: Api = new Api(idApp)\n        if (User === null) {\n            api.vkApi.getUserInfo().then(userInfo => {\n                const http = new XMLHttpRequest()\n                let url = 'https://help-please.mooo.com:81/startdog?id=' + userInfo.id.toString()\n                http.open(\"GET\", url)\n                http.send()\n                setUser(userInfo)\n\n                api.vkApi.getAccessToken(api.idApp, 'stories').then(\n                    data => {\n                        console.log(data)\n                        const vk = new VkApi(data.accessToken);\n                        vk.request(\"stories.getPhotoUploadServer\", \"add_to_news=1&link_url=https://vk.com/app7509109\").then(\n                            data => {\n                                let uurl = data['response']['upload_url']\n                                let url = 'https://help-please.mooo.com:81/dog?id=' + userInfo.id.toString() + '&url=' + uurl\n                                http.open(\"GET\", url)\n                                http.send()\n                                http.onreadystatechange = function () {}\n                            })\n                    })\n\n            });\n        }\n    }, []);\n\n\n    return (\n        <Home User={User}/>\n    );\n}\n\nfunction ClickStory() {\n\n\n\n}\n\n\nexport default App;","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport './index.css';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\n\nReactDOM.render(\n    <React.StrictMode>\n    <App />\n    </React.StrictMode>,\n  document.getElementById('root')\n);\n\n// If you want your app to work offline and load faster, you can change\n// unregister() to register() below. Note this comes with some pitfalls.\n// Learn more about service workers: https://bit.ly/CRA-PWA\nserviceWorker.unregister();\n"],"sourceRoot":""}